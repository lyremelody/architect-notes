# 需求工程
- [需求工程](#需求工程)
  - [1 起始](#1-起始)
    - [1.1 确认利益相关者](#11-确认利益相关者)
    - [1.2 识别多重观点](#12-识别多重观点)
    - [1.3 协作](#13-协作)
      - [1.3.1 方法：使用“计划扑克”](#131-方法使用计划扑克)
    - [1.4 首次提问](#14-首次提问)
    - [1.5 非功能需求](#15-非功能需求)
    - [1.6 可追溯性](#16-可追溯性)
  - [2 获取](#2-获取)
  - [3 细化](#3-细化)
  - [4 协商](#4-协商)
  - [5 规格说明](#5-规格说明)
  - [6 确认](#6-确认)
  - [7 需求管理](#7-需求管理)
  - [参考资料](#参考资料)


**理解问题的需求是软件工程师面对的最困难的任务之一**：
* 客户可能不知道自己需要什么；
* 客户说的可能不是他想要的；
* 最终用户可能对将给他们带来实际收益的特性和功能没有清楚的认识；
* 即使客户和最终用户清楚地指导他们的要求，这些要求也会在项目的实施过程中改变。

**对于需求理解的误区**，开发人员可能认为：
* 在编写软件的过程中事情会变得清晰；
* 只有在检验了软件的早期版本后，项目利益相关者才能更好地理解要求；
* 事情变化太快，以至于理解需求细节是在浪费时间；
* 最终要做的是开发一个可运行的程序，其他都是次要的。

上面这些论点包含了部分真实情况，但是其中的每个论点都存在一些小问题，汇集在一起就可能导致软件项目失败。

**需求工程(Requirement Engineering, RE)** 是指致力于不断理解需求的大量任务和技术。从软件过程的角度来看，需求工程是一个软件工程动作，开始于沟通并持续到建模活动。需求为设计和构建奠定了坚实的基础。

**需求工程包括七项任务：起始、获取、细化、协商、规格说明、确认和管理，这些任务有时候没有明确的界限**。

## 1 起始
如何开始一个软件项目？通常来说，大多数项目都是在确定了商业要求或是发现了潜在的新市场、新服务才开始的。

在项目起始阶段，要建立基本的理解，包括存在的问题、谁需要解决方案、期望的解决方案的性质。在完成一项期间，需要在所有利益相关者与软件团队之间建立沟通，以便开始有效的协作。

在理想情况下，利益相关者和软件工程师在同一个小组中工作。在这种情况下，需求工程就是和组里熟悉的同事进行有意义的交谈。但实际情况往往不是这样。客户或最终用户可能位于不同的城市或国家，对于想要什么可能仅有模糊的想法，对于将要构建的系统可能存在有冲突的意见，他们的技术知识可能很有限，而且只有有限的时间与需求工程师沟通。这种情况都是不希望遇到但又十分常见的，软件开发团队经常不得不在这种情况的限制下工作。

**下面是启动需求工程必需的步骤，以便理解软件需求，使得项目自始至终沿着成功解决方案的方向推进**：
1. 确认利益相关者
2. 识别多重观点
3. 协作
4. 首次提问
5. 非功能需求
6. 可追溯性

### 1.1 确认利益相关者
**Sommerville 和 Sawyer 把利益相关者定义为“直接或间接从正在开发的系统中获益的人”**。
可以确定如下几个容易理解的利益相关者：
* 业务运行管理人员
* 产品管理人员
* 市场销售人员
* 内部和外部客户
* 最终用户
* 顾问
* 产品工程师
* 软件工程师
* 支持和维护工程师

每个利益相关者对系统都有不同的考虑，当系统成功开发后能获得的利益也不相同，同样，当系统开发失败时面临的风险也是不同的。

**在开始阶段，需求工程师应该创建一个人员列表，列出那些有助于获取需求的人**。最初的人员列表将随着接触的利益相关者人数的增多而增加，因为每个利益相关者都将被询问“你认为我还应该和谁交谈”。

### 1.2 识别多重观点
因为存在很多不同的利益相关者，所以系统需求调研也将从不同的视角展开。例如：
* 市场销售部门关心能激发潜在市场、有助于新系统销售的功能和特性；
* 业务经理关注应该在预算内实现的产品特性，并且这些产品特性应该满足已规定的市场限制；
* 最终用户希望系统的功能是他们所熟悉的并且易于学习和使用；
* 软件工程师可能关注非技术背景的利益相关者看不到的软件基础设施，使其能够支持更多的适于销售的功能和特性；
* 支持工程师可能关注软件的可维护性。

这些参与者(以及其他人) 中的每一个人都将为需求工程贡献信息。**当从多个角度收集信息时，所形成的需求可能存在不一致性或相互矛盾。需求工程师的工作就是把所有利益相关者提供的信息 (包括不一致或矛盾的需求)分类，分类的方法应该便于决策制定者为系统选择一个内部一致的需求集合**。

为使软件满足用户而获取需求的过程存在很多困难：
* 项目目标不清晰
* 利益相关者的优先级不同
* 人们还没说出的假设
* 相关利益者对含义的解释不同，很难用一种方式对陈述的需求进行验证。

有效需求工程的目标是消除或尽量减少这些问题。

### 1.3 协作
假设一个项目中有5个利益相关者，那么对一套需求就会有五种(或更多)正确观点。

客户(和其他利益相关者)之间应该团结协作(避免内讧)，并和软件工程人员团结协作，这样才能成功实现期望的系统。但是如何实现协作？

**需求工程师的工作是标识公共区域(即所有利益相关者都同意的需求)和矛盾区域(或不一致区域，即某个利益相关者提出的需求和其他利益相关者都同意的需求)**。当然解决矛盾区域更有挑战性。

协作并不意味着必须由委员会定义需求。在很多情况下，利益相关者通过提供他们各自关于需求的观点来协作，而一个有力的“项目领导者”(例如业务经理或高级技术员)要对删减哪些需求做出最终决定。

#### 1.3.1 方法：使用“计划扑克”
**使用基于“优先点”的“投票”方案**：
* 解决相互冲突的需求
* 更好地理解所有需求的相对重要性

**具体规则**：
* 所有的利益相关者都会分配到一定数量到优先点，这些优先点可以适用于很多需求；
* 在需求列表上，每个利益相关者通过给每个需求分配一个或多个优先点来表明(从他的个人观点)该需求的相对重要性；
* 一旦某个利益相关者的优先点用完，他就不能再对需求采取进一步操作；
* 所有利益相关者在每项需求上的优先点总数显示啦该需求的综合重要性。

### 1.4 首次提问
在项目开始时的提问应该是“与环境无关的”：
1. **第一组与环境无关的问题集中于客户和其他利益相关者以及整体目标与收益**。这些问题有助于识别所有对构建软件感兴趣的利益相关者；此外，这些问题还确认了某个成功实现的可度量收益以及定制软件开发的可选方案。
   * 谁是这项工作的最初请求者？(客户是谁？)
   * 谁将使用该解决方案？ (用户是谁？)
   * 成功的解决方案将带来什么样的经济收益？(价值有多少？)
   * 对于这个解决方案，还需要其他资源吗？
2. **第二组问题有助于软件开发者更好地理解问题，并允许客户表达其对解决方案的看法**。
   * 如何描述由某成功的解决方案产生的“良好”输出的特征？
   * 该解决方案强调解决什么问题？
   * 能向我们展示(或描述)解决方案使用的商业环境吗？
   * 是否存在将影响解决方案的特殊性能问题或约束？
3. **第三组问题关注沟通活动本身的效率**。
   * 你是回答这些问题的合适人选吗？你的回答是“正式的”吗？
   * 我的提问和你想解决的问题相关吗？
   * 我的问题是否太多了？
   * 还有其他人员可以提供更多的信息吗？
   * 还有我应该问的其他问题吗？

这些问题(和其他问题)有助于“破冰”，并有助于交流的开始，而且这样的交流对成功获取需求至关重要。但是，会议形式的问答(Q&A)并非是一定会成功的好方法。事实上，**Q&A会议应该仅用于首次接触，接下来应该用问题求解、协商和规格说明等需求获取方式来代替Q&A会议**。
### 1.5 非功能需求
### 1.6 可追溯性

## 2 获取
询问客户、用户和其他人以下问题：
* 系统或产品的目标是什么？
* 想要实现什么？
* 系统和产品如何满足业务的要求？
* 最终系统或产品如何用于日常工作？

**获取过程中最重要的是建立业务目标**，这是一个系统或产品必须达到的长期目的。目标可能涉及功能或非功能性(例如可靠性、安全性、可用性等)问题。

**目标应该精确定义**，并为需求的细化、验证与确认、冲突管理、协商、解释和发展提供基础。

目标通常是向利益相关者解释需求的好方法，一旦建立了目标：
* 就可以处理利益相关者的冲突和矛盾；
* 就能为开发过程中的每项任务建立优先级并且能为潜在的体系结构(架构)找到合理的设计依据(需要满足利益相关者的目标)；
  
敏捷性是需求工程的一个重要方面。需求获取的目的是将利益相关者的想法及时、顺畅地传递给软件团队。在软件产品开发迭代过程中，很可能不断出现新的需求。

## 3 细化
**细化任务的核心是开发一个精确的需求模型，用以说明软件的功能、特征和信息的各个方面**。细化是在获取过程中由一系列用户场景建模和求精任务驱动的。这些场景描述了如何让最终用户和其他参与者与系统进行交互。解析每个用户场景以便提取**分析类**-最终用户可见的业务域实体。应该定义米个分析类的属性，确定每个类需要的服务，确定类之间的关联和协作关系。

细化固然是一件好事，但是需要知道什么时候停止细化。**细化的关键在于为如何设计建立牢固的基础**，一旦能够清楚描述这个问题，就可以停止细化。不要迷恋不必要的细节。

## 4 协商
业务资源有限，而客户和用户却提出了过高的要求，这是常有的事。另一个相当场景的现象是，不同客户或用户提出了相互冲突的需求，并坚持“我们的特殊要求是至关重要的”。

这些冲突都必须通过**协商**来解决。应该让客户、用户和其他利益相关者对各自的需求排序，然后按优先级讨论冲突。**有效的协商不存在赢家也不存在输家。结果应该是双赢的，因为双方都可以接受的“交易”得到了巩固**。**应使用迭代的方法给需求排序，评估每项需求的成本和风险，处理内部冲突，通过这种方式来删除、组合或修改需求**，以便参与各方均能达到一定的满意度。

## 5 规格说明
在基于计算机的系统(和软件)环境下，术语**规格说明**对不同的人有不同的含义。规格说明可以是一份写好的文档、一套图形化的模型、一个形式化的数学模型、一组使用场景、一个原型或上述各项的任意组合。

有人建议应该开发一个“标准模版”并将之用于规格说明，认为这样将促进以一致的、更易于理解的方式来表示需求。然而，在开发规则说明时，**保持灵活性**有时时必要的。规格说明的形式和格式随着要构造的软件的大小和复杂性而变化。**对大型系统而言，文档最好采用自然语言描述和图形化模型来编写**。

## 6 确认
在确认阶段将对需求工程的工作产品进行质量评估。这个阶段最关心的是各个产品的一致性。可以使用分析模型来确保需求产品的一致性。需求确认要检查规格说明，以保证无歧义地说明了所有的系统需求；已检测出不一致性、疏忽和错误，并予以纠正；工作产品符合为过程、项目和产品建立的标准。

正式的技术评审是主要的需求确认机制。确认需求的评审小组包括软件工程师、客户、用户和其他利益相关者，他们检查系统的规格说明，查找内容或解释上的错误，以及需要进一步澄清的地方、丢失的信息、不一致性(这是构建大型产品或系统时遇到的主要问题)、冲突的需求或不可实现(不能达到的)需求。

## 7 需求管理
对于基于计算机的系统，其需求会变更，而且变更的要求贯穿系统的整个生命周期。需求管理者是帮助项目组在项目进程中标识、控制和跟踪需求以及需求变更的一组活动。

## 参考资料
1. 《软件工程 - 实践者的研究方法》